{"ast":null,"code":"var _jsxFileName = \"D:\\\\MANU C\\\\zero100\\\\zeroback-project\\\\frontend\\\\zeroback-project\\\\frontend\\\\client\\\\src\\\\components\\\\KakaoMapModal.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport \"../css/KakaoMapModal.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function KakaoMapModal({\n  onSelect,\n  onClose\n}) {\n  _s();\n  const [mapInstance, setMapInstance] = useState(null);\n  const [marker, setMarker] = useState(null);\n  const [searchQuery, setSearchQuery] = useState(\"\"); // 검색어 상태\n  const [selectedLocation, setSelectedLocation] = useState(null);\n  useEffect(() => {\n    const loadKakaoSDK = () => {\n      return new Promise(resolve => {\n        if (window.kakao && window.kakao.maps) {\n          resolve(window.kakao);\n        } else {\n          const script = document.createElement(\"script\");\n          script.src = \"https://dapi.kakao.com/v2/maps/sdk.js?appkey=2380b0c6e08137415b69715b13439001&autoload=false&libraries=services\";\n          script.async = true;\n          document.head.appendChild(script);\n          script.onload = () => resolve(window.kakao);\n        }\n      });\n    };\n    loadKakaoSDK().then(kakao => {\n      kakao.maps.load(() => {\n        const container = document.getElementById(\"kakao-map\");\n        if (!container) return;\n\n        // ✅ 기본 위치: 현위치\n        let defaultLatLng = new kakao.maps.LatLng(37.5665, 126.9780); // 서울시청\n        if (navigator.geolocation) {\n          navigator.geolocation.getCurrentPosition(pos => {\n            defaultLatLng = new kakao.maps.LatLng(pos.coords.latitude, pos.coords.longitude);\n            initMap(defaultLatLng);\n          }, () => initMap(defaultLatLng));\n        } else {\n          initMap(defaultLatLng);\n        }\n        function initMap(centerLatLng) {\n          const map = new kakao.maps.Map(container, {\n            center: centerLatLng,\n            level: 3\n          });\n          const newMarker = new kakao.maps.Marker({\n            position: centerLatLng,\n            map\n          });\n          setMapInstance(map);\n          setMarker(newMarker);\n\n          // ✅ 초기 선택 위치 저장\n          const geocoder = new kakao.maps.services.Geocoder();\n          geocoder.coord2Address(centerLatLng.getLng(), centerLatLng.getLat(), (result, status) => {\n            if (status === kakao.maps.services.Status.OK) {\n              setSelectedLocation({\n                address: result[0].address.address_name,\n                lat: centerLatLng.getLat(),\n                lng: centerLatLng.getLng()\n              });\n            }\n          });\n\n          // ✅ 지도 클릭 시 선택 변경\n          kakao.maps.event.addListener(map, \"click\", mouseEvent => {\n            const latlng = mouseEvent.latLng;\n            newMarker.setPosition(latlng);\n            geocoder.coord2Address(latlng.getLng(), latlng.getLat(), (result, status) => {\n              if (status === kakao.maps.services.Status.OK) {\n                setSelectedLocation({\n                  address: result[0].address.address_name,\n                  lat: latlng.getLat(),\n                  lng: latlng.getLng()\n                });\n              }\n            });\n          });\n        }\n      });\n    });\n  }, []);\n\n  // ✅ 확인 버튼 클릭 시 처리\n  const handleConfirm = () => {\n    if (!mapInstance || !marker) return;\n    if (searchQuery.trim()) {\n      // ✅ 검색어 입력 → 검색 후 위치 이동\n      const geocoder = new window.kakao.maps.services.Geocoder();\n      geocoder.addressSearch(searchQuery, (result, status) => {\n        if (status === window.kakao.maps.services.Status.OK) {\n          const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\n          mapInstance.setCenter(coords);\n          marker.setPosition(coords);\n          const address = result[0].address.address_name;\n          onSelect({\n            address,\n            lat: parseFloat(result[0].y),\n            lng: parseFloat(result[0].x)\n          });\n          onClose(); // 모달 닫기\n        } else {\n          alert(\"검색 결과를 찾을 수 없습니다.\");\n        }\n      });\n    } else if (selectedLocation) {\n      // ✅ 지도에서 클릭한 위치 사용\n      onSelect(selectedLocation);\n      onClose();\n    } else {\n      alert(\"위치를 선택하거나 검색하세요.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"search-wrapper\",\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        placeholder: \"\\uC6D0\\uD558\\uB294 \\uC704\\uCE58 \\uAC80\\uC0C9\",\n        className: \"modal-search\",\n        value: searchQuery,\n        onChange: e => setSearchQuery(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"kakao-map\",\n      className: \"kakao-map\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"modal-confirm\",\n      onClick: handleConfirm,\n      children: \"\\uD655\\uC778\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 5\n  }, this);\n}\n_s(KakaoMapModal, \"iMTjzD6W7sifBQsB4adjMFgjyKY=\");\n_c = KakaoMapModal;\nvar _c;\n$RefreshReg$(_c, \"KakaoMapModal\");","map":{"version":3,"names":["React","useEffect","useState","jsxDEV","_jsxDEV","KakaoMapModal","onSelect","onClose","_s","mapInstance","setMapInstance","marker","setMarker","searchQuery","setSearchQuery","selectedLocation","setSelectedLocation","loadKakaoSDK","Promise","resolve","window","kakao","maps","script","document","createElement","src","async","head","appendChild","onload","then","load","container","getElementById","defaultLatLng","LatLng","navigator","geolocation","getCurrentPosition","pos","coords","latitude","longitude","initMap","centerLatLng","map","Map","center","level","newMarker","Marker","position","geocoder","services","Geocoder","coord2Address","getLng","getLat","result","status","Status","OK","address","address_name","lat","lng","event","addListener","mouseEvent","latlng","latLng","setPosition","handleConfirm","trim","addressSearch","y","x","setCenter","parseFloat","alert","children","className","type","placeholder","value","onChange","e","target","fileName","_jsxFileName","lineNumber","columnNumber","id","onClick","_c","$RefreshReg$"],"sources":["D:/MANU C/zero100/zeroback-project/frontend/zeroback-project/frontend/client/src/components/KakaoMapModal.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"../css/KakaoMapModal.css\";\r\n\r\nexport default function KakaoMapModal({ onSelect, onClose }) {\r\n  const [mapInstance, setMapInstance] = useState(null);\r\n  const [marker, setMarker] = useState(null);\r\n  const [searchQuery, setSearchQuery] = useState(\"\"); // 검색어 상태\r\n  const [selectedLocation, setSelectedLocation] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const loadKakaoSDK = () => {\r\n      return new Promise((resolve) => {\r\n        if (window.kakao && window.kakao.maps) {\r\n          resolve(window.kakao);\r\n        } else {\r\n          const script = document.createElement(\"script\");\r\n          script.src =\r\n            \"https://dapi.kakao.com/v2/maps/sdk.js?appkey=2380b0c6e08137415b69715b13439001&autoload=false&libraries=services\";\r\n          script.async = true;\r\n          document.head.appendChild(script);\r\n          script.onload = () => resolve(window.kakao);\r\n        }\r\n      });\r\n    };\r\n\r\n    loadKakaoSDK().then((kakao) => {\r\n      kakao.maps.load(() => {\r\n        const container = document.getElementById(\"kakao-map\");\r\n        if (!container) return;\r\n\r\n        // ✅ 기본 위치: 현위치\r\n        let defaultLatLng = new kakao.maps.LatLng(37.5665, 126.9780); // 서울시청\r\n        if (navigator.geolocation) {\r\n          navigator.geolocation.getCurrentPosition(\r\n            (pos) => {\r\n              defaultLatLng = new kakao.maps.LatLng(pos.coords.latitude, pos.coords.longitude);\r\n              initMap(defaultLatLng);\r\n            },\r\n            () => initMap(defaultLatLng)\r\n          );\r\n        } else {\r\n          initMap(defaultLatLng);\r\n        }\r\n\r\n        function initMap(centerLatLng) {\r\n          const map = new kakao.maps.Map(container, { center: centerLatLng, level: 3 });\r\n          const newMarker = new kakao.maps.Marker({ position: centerLatLng, map });\r\n          setMapInstance(map);\r\n          setMarker(newMarker);\r\n\r\n          // ✅ 초기 선택 위치 저장\r\n          const geocoder = new kakao.maps.services.Geocoder();\r\n          geocoder.coord2Address(centerLatLng.getLng(), centerLatLng.getLat(), (result, status) => {\r\n            if (status === kakao.maps.services.Status.OK) {\r\n              setSelectedLocation({\r\n                address: result[0].address.address_name,\r\n                lat: centerLatLng.getLat(),\r\n                lng: centerLatLng.getLng(),\r\n              });\r\n            }\r\n          });\r\n\r\n          // ✅ 지도 클릭 시 선택 변경\r\n          kakao.maps.event.addListener(map, \"click\", (mouseEvent) => {\r\n            const latlng = mouseEvent.latLng;\r\n            newMarker.setPosition(latlng);\r\n            geocoder.coord2Address(latlng.getLng(), latlng.getLat(), (result, status) => {\r\n              if (status === kakao.maps.services.Status.OK) {\r\n                setSelectedLocation({\r\n                  address: result[0].address.address_name,\r\n                  lat: latlng.getLat(),\r\n                  lng: latlng.getLng(),\r\n                });\r\n              }\r\n            });\r\n          });\r\n        }\r\n      });\r\n    });\r\n  }, []);\r\n\r\n  // ✅ 확인 버튼 클릭 시 처리\r\n  const handleConfirm = () => {\r\n    if (!mapInstance || !marker) return;\r\n\r\n    if (searchQuery.trim()) {\r\n      // ✅ 검색어 입력 → 검색 후 위치 이동\r\n      const geocoder = new window.kakao.maps.services.Geocoder();\r\n      geocoder.addressSearch(searchQuery, (result, status) => {\r\n        if (status === window.kakao.maps.services.Status.OK) {\r\n          const coords = new window.kakao.maps.LatLng(result[0].y, result[0].x);\r\n          mapInstance.setCenter(coords);\r\n          marker.setPosition(coords);\r\n          const address = result[0].address.address_name;\r\n\r\n          onSelect({ address, lat: parseFloat(result[0].y), lng: parseFloat(result[0].x) });\r\n          onClose(); // 모달 닫기\r\n        } else {\r\n          alert(\"검색 결과를 찾을 수 없습니다.\");\r\n        }\r\n      });\r\n    } else if (selectedLocation) {\r\n      // ✅ 지도에서 클릭한 위치 사용\r\n      onSelect(selectedLocation);\r\n      onClose();\r\n    } else {\r\n      alert(\"위치를 선택하거나 검색하세요.\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      {/* 검색 입력 */}\r\n      <div className=\"search-wrapper\">\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"원하는 위치 검색\"\r\n          className=\"modal-search\"\r\n          value={searchQuery}\r\n          onChange={(e) => setSearchQuery(e.target.value)}\r\n        />\r\n      </div>\r\n\r\n      {/* 지도 */}\r\n      <div id=\"kakao-map\" className=\"kakao-map\"></div>\r\n\r\n      {/* 확인 버튼 */}\r\n      <button className=\"modal-confirm\" onClick={handleConfirm}>\r\n        확인\r\n      </button>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}